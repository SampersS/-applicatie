<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="./lib/prng4.js"></script>
    <script src="./lib/rng.js"></script>
    <script src="./lib/jsbn.js"></script>
    <script src="./lib/rsa.js"></script>
    <script src="./lib/base64.js"></script>
    <script src="./lib/tools.js"></script>
</head>
<body onload="prepare()">
    <div id="pwobj" style="display:none">
        <label for="txtPassword">Wachtwoord:</label><br>
        <input type="password" id="txtPassword"><br>
    </div>
    <p style="margin: 0px;">Naam:</p><br>
    <input type="text" id="txtnaam"><br>
    <button onclick="sendNew()">Voeg toe</button>
    <button onclick="window.location.href = 'menu.html'">Terug</button><br>
    <p style="margin: 0px;">Ingaven:</p>
    <table id="tabel">
        <tr>
            <th>id</th>
            <th>naam</th>
        </tr>
    </table>
</body>
<script>
    const sendNew = function(){
        let naam = document.getElementById("txtnaam").value
        if(naam != ""){
            let chsum = generateCHS(naam);
            let url = serverAddress+apiAdditions+"addGroup/"+naam
            var http = new XMLHttpRequest();
            http.open('POST', url, false);
            http.setRequestHeader("authorization",cryptograaf(naam, false))
            http.send()
        }
    }
    const prepare = function(){
        let string = serverAddress+apiAdditions+"getGroups"
        let groepElement = document.getElementById("groepen");
        PreparePassword()
        GetData(string, function(data){
            for (let index = 0; index < data.length; index++) {
                let tabelElement = document.getElementById("tabel")
                let newrow = tabelElement.insertRow()
                let cel1 = newrow.insertCell();
                let cel2 = newrow.insertCell();
                let id = document.createTextNode(data[index].idgroep_namen);
                let naam = document.createTextNode(data[index].naam);
                cel1.appendChild(id)
                cel2.appendChild(naam)
            }
            getMeta()
        })
    }
</script>
</html>